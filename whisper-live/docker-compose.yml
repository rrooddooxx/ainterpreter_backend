services:
  whisper-server:
    build:
      context: .
      dockerfile: Dockerfile.gpu
    ports:
      - "9090:9090"  # Replace with the actual port your application is running on
    volumes:
      - .:/app  # Mounts the current directory to /app inside the container, adjust if needed
    restart: always  # Ensures the service restarts if it crashes
  rtsp-server:
    image: bluenviron/mediamtx:latest
    build:
      context: .
    environment:
      - MTX_PROTOCOLS=tcp
      - MTX_WEBRTCADDITIONALHOSTS="192.168.x.x"
    ports:
      - "8554:8554"
      - "1935:1935"
      - "8888:8888"
      - "8889:8889"
      - "8890:8890/udp"
      - "8189:8189/udp"
    restart: always